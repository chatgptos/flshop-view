(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/coupon/apply"],{"0484":function(o,t,n){"use strict";n.r(t);var e=n("6589"),u=n.n(e);for(var c in e)"default"!==c&&function(o){n.d(t,o,(function(){return e[o]}))}(c);t["default"]=u.a},"205f":function(o,t,n){"use strict";(function(o){n("e954");e(n("66fd"));var t=e(n("6e09"));function e(o){return o&&o.__esModule?o:{default:o}}wx.__webpack_require_UNI_MP_PLUGIN__=n,o(t.default)}).call(this,n("543d")["createPage"])},6589:function(o,t,n){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=u(n("a34a"));function u(o){return o&&o.__esModule?o:{default:o}}function c(o,t,n,e,u,c,a){try{var r=o[c](a),i=r.value}catch(p){return void n(p)}r.done?t(i):Promise.resolve(i).then(e,u)}function a(o){return function(){var t=this,n=arguments;return new Promise((function(e,u){var a=o.apply(t,n);function r(o){c(a,e,u,r,i,"next",o)}function i(o){c(a,e,u,r,i,"throw",o)}r(void 0)}))}}var r={data:function(){return{coupon_id:0,coupon_state:!1,coupon:null,dataList:[],reload:!1,total:0,current_page:1,last_page:1,status:"more",contentText:{contentdown:" ",contentrefresh:"加载中",contentnomore:""}}},onLoad:function(o){this.coupon_id=o.id,this.coupon_state=!!o.state,this.loadData()},onPullDownRefresh:function(){this.current_page=1,this.reload=!0,this.loadData()},onReachBottom:function(){this.current_page>=this.last_page?this.status="noMore":(this.reload=!1,this.current_page=this.current_page+1,this.status="loading",this.loadData())},methods:{loadData:function(){var t=this;return a(e.default.mark((function n(){return e.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$api.get({url:"/flbooth/coupon/apply",data:{id:t.coupon_id,page:t.current_page},success:function(n){o.stopPullDownRefresh(),t.coupon=n.coupon,t.dataList=t.reload?n.goods.data:t.dataList.concat(n.goods.data),t.total=n.goods.total,t.current_page=n.goods.current_page,t.last_page=n.goods.last_page,t.status=0==n.goods.total?"noMore":"more"}});case 1:case"end":return n.stop()}}),n)})))()},onReceive:function(o){var t=this;return a(e.default.mark((function n(){return e.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$api.post({url:"/flbooth/coupon/receive",loadingTip:"领取中",data:{id:o},success:function(o){t.coupon_state=!0,t.$flbooth.msg(o),t.$store.commit("statistics/dynamic",{coupon:t.$store.state.statistics.dynamic.coupon+1})}});case 1:case"end":return n.stop()}}),n)})))()}}};t.default=r}).call(this,n("543d")["default"])},"6e09":function(o,t,n){"use strict";n.r(t);var e=n("ec8f"),u=n("0484");for(var c in u)"default"!==c&&function(o){n.d(t,o,(function(){return u[o]}))}(c);var a,r=n("f0c5"),i=Object(r["a"])(u["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],a);t["default"]=i.exports},ec8f:function(o,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return e}));var e={wanlProduct:function(){return n.e("components/wanl-product/wanl-product").then(n.bind(null,"8121"))}},u=function(){var o=this,t=o.$createElement,n=(o._self._c,o.coupon?o.$flbooth.appstc("/coupon/bg_coupon_3x.png"):null),e=o.coupon&&o.coupon_state?o.$flbooth.appstc("/coupon/img_couponcentre_received_3x.png"):null,u=o.coupon&&("reduction"==o.coupon.type||"vip"==o.coupon.type&&"reduction"==o.coupon.usertype)?Number(o.coupon.price):null,c=o.coupon&&("reduction"==o.coupon.type||"vip"==o.coupon.type&&"reduction"==o.coupon.usertype)?Number(o.coupon.limit):null,a=o.coupon&&("reduction"==o.coupon.type||"vip"==o.coupon.type&&"reduction"==o.coupon.usertype)?Number(o.coupon.price):null,r=o.coupon&&("discount"==o.coupon.type||"vip"==o.coupon.type&&"discount"==o.coupon.usertype)?Number(o.coupon.discount):null,i=o.coupon&&("discount"==o.coupon.type||"vip"==o.coupon.type&&"discount"==o.coupon.usertype)?Number(o.coupon.limit):null,p=o.coupon&&("discount"==o.coupon.type||"vip"==o.coupon.type&&"discount"==o.coupon.usertype)?Number(o.coupon.discount):null,s=o.coupon&&"shipping"==o.coupon.type?Number(o.coupon.limit):null;o.$mp.data=Object.assign({},{$root:{g0:n,g1:e,m0:u,m1:c,m2:a,m3:r,m4:i,m5:p,m6:s}})},c=[]}},[["205f","common/runtime","common/vendor"]]]);
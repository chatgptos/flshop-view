<view class="wanl-chat"><view data-event-opts="{{[['touchstart',[['hideDrawer',['$event']]]]]}}" bindtouchstart="__e"><scroll-view class="cu-chat" scroll-y="true" scroll-with-animation="{{scrollAnimation}}" scroll-top="{{scrollTop}}" scroll-into-view="{{scrollToView}}" upper-threshold="50"><block wx:for="{{$root.l0}}" wx:for-item="row" wx:for-index="index" wx:key="index"><view id="{{'msg'+row.$orig.id}}"><block wx:if="{{row.$orig.form.id==user_id}}"><view class="cu-item self"><block wx:if="{{row.$orig.message.type=='text'}}"><view class="main"><view class="content bg-green"><rich-text nodes="{{row.$orig.message.content.text}}"></rich-text></view></view></block><block wx:if="{{row.$orig.message.type=='img'}}"><view class="main"><image style="{{'width:'+(row.$orig.message.content.w+'px')+';'+('height:'+(row.$orig.message.content.h+'px')+';')}}" src="{{row.$orig.message.content.url}}" data-event-opts="{{[['tap',[['showPic',['$0'],[[['msgList','',index,'message']]]]]]]}}" bindtap="__e"></image></view></block><block wx:if="{{row.$orig.message.type=='voice'}}"><view data-event-opts="{{[['tap',[['playVoice',['$0'],[[['msgList','',index,'message']]]]]]]}}" class="{{['main',playMsgid==row.$orig.message.id?'play':'']}}" bindtap="__e"><view class="action text-bold text-grey" style="padding-right:2rpx;">{{''+row.$orig.message.content.length+''}}<text class="wlIcon-miao"></text></view><view class="content bg-green"><text style="{{'width:'+(row.$orig.message.content.length*6+'rpx')+';'}}"></text><text class="wlIcon-yuyinyou text-xxl padding-left-xl"></text></view></view></block><view class="cu-avatar round" style="{{'background-image:'+('url('+row.g0+')')+';'}}"></view></view></block><block wx:else><view class="cu-item"><block wx:if="{{row.$orig.form.avatar}}"><view class="cu-avatar round" style="{{'background-image:'+('url('+row.g1+')')+';'}}"></view></block><block wx:else><view class="cu-avatar round" style="{{'background-image:'+('url('+row.g2+')')+';'}}"></view></block><block wx:if="{{row.$orig.message.type=='text'}}"><view class="main"><view class="content"><rich-text nodes="{{row.$orig.message.content.text}}"></rich-text></view></view></block><block wx:if="{{row.$orig.message.type=='list'}}"><view class="main"><view class="content"><view class="list"><block wx:if="{{row.$orig.message.content.length>0}}"><view><view>您是否想问 ？<view class="ai solid-top solid-bottom"><block wx:for="{{row.$orig.message.content}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view data-event-opts="{{[['tap',[['aiSend',[item.keywords?item.keywords:'未设置关键字']]]]]}}" class="text-cut" bindtap="__e"><text>{{item.title}}</text></view></block></view></view><view>都不是？您可以<text data-event-opts="{{[['tap',[['aiSend',['人工客服']]]]]}}" bindtap="__e">点击此处</text>，或者回复人工</view></view></block><block wx:else><view>没有任何相关帮助内容，<text data-event-opts="{{[['tap',[['aiSend',['人工客服']]]]]}}" bindtap="__e">点击此处</text>或者回复人工</view></block></view></view></view></block><block wx:if="{{row.$orig.message.type=='article'}}"><view data-event-opts="{{[['tap',[['onDetails',['$0','$1'],[[['msgList','',index,'message.content.id']],[['msgList','',index,'message.content.title']]]]]]]}}" class="main" bindtap="__e"><view class="content"><view style="width:100%;"><view>{{''+row.$orig.message.content.title+''}}</view><view class="article solid-top"><rich-text nodes="{{row.$orig.message.content.content}}"></rich-text></view></view></view></view></block><block wx:if="{{row.$orig.message.type=='img'}}"><view class="main"><image style="{{'width:'+(row.$orig.message.content.w+'px')+';'+('height:'+(row.$orig.message.content.h+'px')+';')}}" src="{{row.$orig.message.content.url}}" data-event-opts="{{[['tap',[['showPic',['$0'],[[['msgList','',index,'message']]]]]]]}}" bindtap="__e"></image></view></block><view class="date">{{row.g3+''}}</view></view></block></view></block></scroll-view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['popup-layer',(popupLayerClass)?'showLayer':'']}}" catchtouchmove="__e"><view class="{{[(hideEmoji)?'hidden':'']}}"><view class="emoji"><scroll-view class="emojinav" scroll-x="{{true}}" scroll-with-animation="{{true}}"><view class="item"><block wx:for="{{emojiList.categories}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{[item==TabCur?'emojibg':'']}}" style="{{'background-image:'+('url('+emojiList.groups[item][0].url+')')+';'}}" data-id="{{item}}" data-event-opts="{{[['tap',[['tabSelect',['$event']]]]]}}" bindtap="__e"></view></block></view></scroll-view><block wx:for="{{emojiList.groups}}" wx:for-item="emoji" wx:for-index="groups" wx:key="groups"><block wx:if="{{TabCur==groups}}"><scroll-view class="subject" scroll-y="{{true}}" scroll-with-animation="{{true}}"><view class="item grid margin-bottom text-center col-5"><block wx:for="{{emoji}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['addEmoji',['$0'],[[['emojiList.groups','',groups],['','',index,'value']]]]]]]}}" style="{{'background-image:'+('url('+item.url+')')+';'}}" bindtap="__e"></view></block></view></scroll-view></block></block></view></view><view class="{{['solid-top',(hideMore)?'hidden':'']}}"><view class="opmenu solid-top"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon"><text class="wlIcon-tupian1"></text></view><text class="text-sm">照片</text></view><view data-event-opts="{{[['tap',[['camera',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon"><text class="wlIcon-31paishexuanzhong"></text></view><text class="text-sm">拍摄</text></view></view></view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['input-box',(emptybottom)?'emptybottom':'',(popupLayerClass)?'showLayer':'']}}" catchtouchmove="__e"><view class="voice"><view data-event-opts="{{[['tap',[['switchVoice',['$event']]]]]}}" class="{{[isVoice?'wlIcon-jianpanqiehuan':'wlIcon-yuyin']}}" bindtap="__e"></view></view><view class="textbox"><view data-event-opts="{{[['touchstart',[['voiceBegin',['$event']]]],['touchmove',[['voiceIng',['$event']]]],['touchend',[['voiceEnd',['$event']]]],['touchcancel',[['voiceCancel',['$event']]]]]}}" class="{{['voice-mode',isVoice?'':'hidden',recording?'recording':'']}}" bindtouchstart="__e" catchtouchmove="__e" bindtouchend="__e" bindtouchcancel="__e">{{''+voiceTis+''}}</view><view class="{{['text-mode',isVoice?'hidden':'']}}"><view class="box"><textarea auto-height="true" maxlength="300" show-confirm-bar="{{false}}" cursor-spacing="90" data-event-opts="{{[['focus',[['textareaFocus',['$event']]]],['blur',[['textareaBlur',['$event']]]],['confirm',[['sendText',['$event']]]],['input',[['__set_model',['','textMsg','$event',[]]]]]]}}" value="{{textMsg}}" bindfocus="__e" bindblur="__e" bindconfirm="__e" bindinput="__e"></textarea></view><view data-event-opts="{{[['tap',[['chooseEmoji',['$event']]]]]}}" class="em" bindtap="__e"><view class="wlIcon-biaoqing2"></view></view></view></view><view data-event-opts="{{[['tap',[['showMore',['$event']]]]]}}" class="more" style="margin-right:-12rpx;" bindtap="__e"><view class="wlIcon-yuanquanjiahao"></view></view><view data-event-opts="{{[['tap',[['sendText',['$event']]]]]}}" class="{{['send',isVoice?'hidden':'']}}" bindtap="__e"><block wx:if="{{textMsg}}"><text class="wlIcon-zhifeiji"></text></block><block wx:else><text class="wlIcon-fasong"></text></block></view></view><view class="{{['record',recording?'':'hidden']}}"><view class="{{['ing',willStop?'hidden':'']}}"><view class="wlIcon-huatong01"></view></view><view class="{{['cancel',willStop?'':'hidden']}}"><view class="wlIcon-shanchu2"></view></view><view class="{{['tis',willStop?'change':'']}}">{{recordTis}}</view></view></view>
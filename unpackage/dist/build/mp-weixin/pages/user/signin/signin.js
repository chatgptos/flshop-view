(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/signin/signin"],{"24da":function(t,n,e){"use strict";(function(t){e("e954");i(e("66fd"));var n=i(e("af08"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(n.default)}).call(this,e("543d")["createPage"])},"51a6":function(t,n,e){"use strict";e.d(n,"b",(function(){return s})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){return i}));var i={wanlSteps:function(){return e.e("components/wanl-steps/wanl-steps").then(e.bind(null,"9993"))},uniCalendar:function(){return Promise.all([e.e("common/vendor"),e.e("components/uni-calendar/uni-calendar")]).then(e.bind(null,"de1f"))},wanlModal:function(){return e.e("components/wanl-modal/wanl-modal").then(e.bind(null,"4d27"))}},s=function(){var t=this,n=t.$createElement,e=(t._self._c,t.$flbooth.oss(t.user.avatar,52,52,2,"avatar")),i=t.$flbooth.appstc("/common/cup.png");t._isMounted||(t.e0=function(n){t.attendanceModalVisible=!1}),t.$mp.data=Object.assign({},{$root:{g0:e,g1:i}})},o=[]},"9d6c":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("a34a")),s=e("26cb");function o(t){return t&&t.__esModule?t:{default:t}}function a(t,n,e,i,s,o,a){try{var r=t[o](a),c=r.value}catch(u){return void e(u)}r.done?n(c):Promise.resolve(c).then(i,s)}function r(t){return function(){var n=this,e=arguments;return new Promise((function(i,s){var o=t.apply(n,e);function r(t){a(o,i,s,r,c,"next",t)}function c(t){a(o,i,s,r,c,"throw",t)}r(void 0)}))}}function c(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function u(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?c(Object(e),!0).forEach((function(n){l(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function l(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var f={data:function(){return{signinData:{},selected:[],signinInfo:"",attendanceModalVisible:!1,stepsOption:[{title:"1天",desc:"+1"},{title:"2天",desc:"+2"},{title:"3天",desc:"+3"},{title:"4天",desc:"+4"},{title:"5天",desc:"+5"},{title:"6天",desc:"+6"},{title:"7天",desc:"+7"},{title:"7天+",desc:"+7",circle:"/static/images/integrals/goal.png",circleStyle:"width: 47rpx; height: 39rpx;"}]}},onLoad:function(t){this.loadData()},computed:u({},(0,s.mapState)(["user"])),methods:{loadData:function(){var t=this;return r(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$api.get({url:"/flbooth/signin/getSignin",success:function(n){t.signinData=n,t.stepsOption[0].desc="+"+n.signinscore.s1,t.stepsOption[1].desc="+"+n.signinscore.s2,t.stepsOption[2].desc="+"+n.signinscore.s3,t.stepsOption[3].desc="+"+n.signinscore.s4,t.stepsOption[4].desc="+"+n.signinscore.s5,t.stepsOption[5].desc="+"+n.signinscore.s6,t.stepsOption[6].desc="+"+n.signinscore.s7,t.stepsOption[7].desc="+"+n.signinscore.sn,n.list.forEach((function(n){t.selected.push({date:t.timestampToTime(n.created),info:"已签"})})),t.$store.commit("user/setUserInfo",{score:n.user_score})}});case 1:case"end":return n.stop()}}),n)})))()},attendance:function(){var t=this;this.$api.post({url:"/flbooth/signin/dosign",success:function(n){t.loadData(),t.signinData.signin?t.signinInfo="已经连续签到"+t.signinData.successions+"天/n明日继续签到可获得"+t.signinData.score+"积分":t.signinInfo="赠送的"+t.signinData.score+"积分已发到您的账户中",t.attendanceModalVisible=!0}})},change:function(n){var e=this;this.signinData.date==n.fulldate?this.attendance():1==this.signinData.isfillup?t.showModal({title:"确定要补签",content:"确认进行补签日期："+n.fulldate+"？补签将消耗"+this.signinData.fillupscore+"积分",success:function(t){t.confirm&&e.$api.get({url:"/flbooth/signin/fillup",data:{date:n.fulldate},success:function(t){e.signinInfo="补签"+n.fulldate+"日成功，本次扣除"+e.signinData.fillupscore+"积分",e.attendanceModalVisible=!0,e.loadData()}})}}):this.$flbooth.msg("系统不允许补签")},timestampToTime:function(t){var n=new Date(1e3*t),e=n.getFullYear()+"-",i=(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-",s=n.getDate();return e+i+s},onScore:function(){this.$flbooth.to("/pages/user/signin/log")}}};n.default=f}).call(this,e("543d")["default"])},a243:function(t,n,e){"use strict";var i=e("e903"),s=e.n(i);s.a},ad02:function(t,n,e){"use strict";e.r(n);var i=e("9d6c"),s=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);n["default"]=s.a},af08:function(t,n,e){"use strict";e.r(n);var i=e("51a6"),s=e("ad02");for(var o in s)"default"!==o&&function(t){e.d(n,t,(function(){return s[t]}))}(o);e("a243");var a,r=e("f0c5"),c=Object(r["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);n["default"]=c.exports},e903:function(t,n,e){}},[["24da","common/runtime","common/vendor"]]]);
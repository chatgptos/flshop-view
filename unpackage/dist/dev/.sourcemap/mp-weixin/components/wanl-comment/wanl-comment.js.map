{"version":3,"sources":["webpack:///D:/soft/fenglei/code/flshop/components/wanl-comment/wanl-comment.vue?aae3","webpack:///D:/soft/fenglei/code/flshop/components/wanl-comment/wanl-comment.vue?11c0","webpack:///D:/soft/fenglei/code/flshop/components/wanl-comment/wanl-comment.vue?5b70","webpack:///D:/soft/fenglei/code/flshop/components/wanl-comment/wanl-comment.vue?3b80","uni-app:///components/wanl-comment/wanl-comment.vue","webpack:///D:/soft/fenglei/code/flshop/components/wanl-comment/wanl-comment.vue?ec13","webpack:///D:/soft/fenglei/code/flshop/components/wanl-comment/wanl-comment.vue?f5ca"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACa;;;AAGxE;AACmK;AACnK,gBAAgB,0KAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7CA;AAAA;AAAA;AAAA;AAAymB,CAAgB,umBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2J7nB;AACA,qBADA;AAEA;AACA;AACA,kBADA;AAEA,gBAFA,EADA;;AAKA;AACA,mBADA;AAEA,oBAFA,EALA;;AASA;AACA,kBADA;AAEA,gBAFA,EATA;;AAaA;AACA,iBADA;AAEA,aAFA,sBAEA;AACA;AACA,OAJA,EAbA;;AAmBA;AACA,kBADA;AAEA,iCAFA,EAnBA,EAFA;;;AA0BA,MA1BA,kBA0BA;AACA;AACA,mBADA;AAEA,kBAFA;AAGA,qBAHA;AAIA;AACA,iBADA,EACA;AACA,qBAFA,CAEA;AAFA,OAJA;AAQA,iBARA,EAQA;AACA,kBATA,CASA;AATA;AAWA,GAtCA;AAuCA,SAvCA,qBAuCA;AACA,iBADA,GACA,uBADA;AAEA;AACA;AACA,qGAJA;AAKA,GA5CA;AA6CA;AACA;AACA,eAFA,uBAEA,KAFA,EAEA,MAFA,EAEA,GAFA,EAEA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA,KAXA;AAYA;AACA,cAbA,sBAaA,KAbA,EAaA;AACA;AACA,yBADA,GACA,qFADA;AAEA;AACA;AACA,4GADA;AAEA;AACA,oCADA,EAFA;;AAKA;AACA,yDADA;AAEA,2DAFA,EALA;;AASA;AACA;AACA;AACA;AACA;AACA,yBAFA,MAEA;AACA;AACA;AACA,uBAPA,MAOA;AACA;AACA,6CADA;AAEA,sCAFA;;AAIA;AACA,qBAvBA;;AAyBA,iBA5BA,MA4BA;AACA;AACA,gDADA;;AAGA,iBAjCA;AAkCA,KA/CA;AAgDA;AACA,aAjDA,uBAiDA;AACA,gDADA;AAEA,yFAFA;AAGA;AACA,iCADA;AAEA,gCAFA,IAHA;;;;AASA;AACA;AACA,yGADA;AAEA,yCAFA;AAGA;AACA,uDADA;AAEA,yDAFA,EAHA;;AAOA,gCAPA;AAQA;AACA;AACA;AACA,qCADA;AAEA,oCAFA;;AAIA;AACA;AACA,qBAPA,MAOA;AACA;AACA,2CADA;AAEA,oCAFA;;AAIA;AACA,mBAtBA,IAVA;;;AAmCA;AACA,8CADA,IAnCA;;;AAuCA,KAxFA;AAyFA;AACA,gBA1FA,wBA0FA,KA1FA,EA0FA;AACA;AACA;AACA,6CADA;AAEA,uCAFA;AAGA;AACA;AACA;AACA;AACA,iHADA;AAEA;AACA,0CADA;AAEA,oDAFA,EAFA;;AAMA;AACA,+DADA;AAEA,iEAFA,EANA;;AAUA,wCAVA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA,+BAFA,MAEA;AACA;AACA;AACA;AACA,6BATA,MASA;AACA;AACA,mDADA;AAEA,4CAFA;;AAIA;AACA,2BA3BA;;AA6BA;AACA,qBApCA;;AAsCA,iBAvCA,MAuCA;AACA;AACA,gDADA;;AAGA,iBA5CA;AA6CA,KAvIA;AAwIA;AACA,YAzIA,sBAyIA;AACA;AACA;AACA;AACA,KA7IA;AA8IA;AACA,cA/IA,wBA+IA;AACA;AACA,KAjJA;AAkJA;AACA,gBAnJA,0BAmJA;AACA;AACA;AACA,KAtJA;AAuJA;AACA,cAxJA,sBAwJA,OAxJA,EAwJA;AACA;AACA,KA1JA;AA2JA,OA3JA,eA2JA,GA3JA,EA2JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,OATA,MASA;AACA;;AAEA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA,KAjMA,EA7CA,E;;;;;;;;;;;;;AC3JA;AAAA;AAAA;AAAA;AAA43B,CAAgB,s1BAAG,EAAC,C;;;;;;;;;;;ACAh5B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/wanl-comment/wanl-comment.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./wanl-comment.vue?vue&type=template&id=065957c4&\"\nvar renderjs\nimport script from \"./wanl-comment.vue?vue&type=script&lang=js&\"\nexport * from \"./wanl-comment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wanl-comment.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/wanl-comment/wanl-comment.vue\"\nexport default component.exports","export * from \"-!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wanl-comment.vue?vue&type=template&id=065957c4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 =\n    _vm.commentList.length != 0\n      ? _vm.__map(_vm.commentList, function(item, index) {\n          var $orig = _vm.__get_orig(item)\n\n          var m0 = _vm.oss(item.user.avatar, 88, 88)\n          var m1 = _vm.formatHtml(item.content)\n          var l0 =\n            item.childlist.length > 0\n              ? _vm.__map(item.childlist, function(each, keys) {\n                  var $orig = _vm.__get_orig(each)\n\n                  var m2 = _vm.oss(each.user.avatar, 88, 88)\n                  var m3 = _vm.formatHtml(each.content)\n                  return {\n                    $orig: $orig,\n                    m2: m2,\n                    m3: m3\n                  }\n                })\n              : null\n          return {\n            $orig: $orig,\n            m0: m0,\n            m1: m1,\n            l0: l0\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../hbuild/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wanl-comment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../hbuild/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wanl-comment.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"wanl-comment\">\r\n\t\t<!-- 评论主体-start -->\r\n\t\t<scroll-view\r\n\t\t\tv-if=\"commentList.length != 0\"\r\n\t\t\tclass=\"margin-bottom-bj\"\r\n\t\t\t:style=\"{ height: `${mainHeight}px` }\"\r\n\t\t\tscroll-y\r\n\t\t>\r\n\t\t\t<view class=\"flex flex-direction margin-bottom-sm\" v-for=\"(item, index) in commentList\" :key=\"index\">\r\n\t\t\t\t<image class=\"comment-avatar round margin-right-bj\" :src=\"oss(item.user.avatar, 88, 88)\"></image>\r\n\t\t\t\t<view class=\"flex-sub\">\r\n\t\t\t\t\t<!-- 父评论体-start -->\r\n\t\t\t\t\t<view class=\"flex flex-direction justify-between align-center\">\r\n\t\t\t\t\t\t<view class=\"flex flex-direction align-center\">\r\n\t\t\t\t\t\t\t<view class=\"comment-tag bg-orange flex align-center margin-right-sm\" v-if=\"index == 0\">\r\n\t\t\t\t\t\t\t\t<text class=\"text-xs text-white\">沙发</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"comment-tag bg-olive flex align-center margin-right-sm\" v-if=\"index == 1\">\r\n\t\t\t\t\t\t\t\t<text class=\"text-xs text-white\">板凳</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"comment-tag bg-blue flex align-center margin-right-sm\" v-if=\"index == 2\">\r\n\t\t\t\t\t\t\t\t<text class=\"text-xs text-white\">地板</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<text class=\"text-30\" :class=\"embedded ? 'text-white-6' : 'text-black-6'\">{{ item.user.nickname }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"comment-fabulous flex flex-direction align-center\" @click=\"handleLike(index)\">\r\n\t\t\t\t\t\t\t<text class=\"text-df margin-right-xs\" :class=\"item.hasLike ? 'text-red' : (embedded ? 'text-white-6' : 'text-black-6')\"> {{ item.like }} </text>\r\n\t\t\t\t\t\t\t<!-- #ifndef APP-PLUS -->\r\n\t\t\t\t\t\t\t<text class=\"text-df\" :class=\"item.hasLike ? 'text-red wlIcon-dianzan1' : 'text-white-6 wlIcon-dianzan11'\"/>\r\n\t\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t\t<!-- #ifdef APP-PLUS -->\r\n\t\t\t\t\t\t\t<text v-if=\"embedded\" class=\"icon text-df\" :class=\"item.hasLike ? 'text-red' : 'text-white-6'\">{{item.hasLike ? '&#xe6f9;' : '&#xe6fd;'}}</text>\r\n\t\t\t\t\t\t\t<text v-else class=\"text-df\" :class=\"item.hasLike ? 'text-red wlIcon-dianzan1' : 'text-white-6 wlIcon-dianzan11'\"/>\r\n\t\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"margin-tb-s\">\r\n\t\t\t\t\t\t<text class=\"text-sm\" :class=\"embedded ? 'text-white-9' : 'text-black-9'\">{{formatHtml(item.content)}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex flex-direction align-center margin-bottom-sm\">\r\n\t\t\t\t\t\t<view class=\"margin-right-sm\">\r\n\t\t\t\t\t\t\t<text class=\"text-sm\" :class=\"embedded ? 'text-white-5' : 'text-black-5'\">{{ item.created_text }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\tclass=\"margin-right-sm\"\r\n\t\t\t\t\t\t\t@click=\"handleReply(item.user.nickname, item.user.nickname, item.id)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<text class=\"text-sm text-blue\">回复</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\tclass=\"margin-right-sm\"\r\n\t\t\t\t\t\t\tv-if=\"item.owner\"\r\n\t\t\t\t\t\t\t@click=\"handleDelete(index)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<text class=\"text-sm text-red\">删除</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 父评论体-end -->\r\n\t\t\t\t\t<!-- 子评论列表-start -->\r\n\t\t\t\t\t<view v-if=\"item.childlist.length > 0\" class=\"comment-chil-dlist padding-lr-sm padding-top-sm margin-bottom-sm radius-bock\">\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\tclass=\"flex flex-direction\"\r\n\t\t\t\t\t\t\tv-for=\"(each, keys) in item.childlist\"\r\n\t\t\t\t\t\t\t:key=\"keys\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<image class=\"comment-avatar round margin-right-bj\" :src=\"oss(each.user.avatar, 88, 88)\"></image>\r\n\t\t\t\t\t\t\t<view class=\"flex-sub\">\r\n\t\t\t\t\t\t\t\t<view class=\"flex flex-direction justify-between align-center\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"nick-name\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"text-30\" :class=\"embedded ? 'text-white-6' : 'text-black-6'\">{{ each.user.nickname }}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"comment-fabulous flex flex-direction align-center\" @click=\"handleLike(index, keys)\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"text-df margin-right-xs\" :class=\"each.hasLike ? 'text-red' : (embedded ? 'text-white-6' : 'text-black-6')\"> {{ each.like }} </text>\r\n\t\t\t\t\t\t\t\t\t\t<!-- #ifndef APP-PLUS -->\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"text-df\" :class=\"each.hasLike ? 'text-red wlIcon-dianzan1' : 'text-black-6 wlIcon-dianzan11'\"/>\r\n\t\t\t\t\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t\t\t\t\t<!-- #ifdef APP-PLUS -->\r\n\t\t\t\t\t\t\t\t\t\t<text v-if=\"embedded\" class=\"icon text-df\" :class=\"each.hasLike ? 'text-red' : 'text-white-6'\">{{each.hasLike ? '&#xe6f9;' : '&#xe6fd;'}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<text v-else class=\"text-df\" :class=\"each.hasLike ? 'text-red wlIcon-dianzan1' : 'text-black-6 wlIcon-dianzan11'\"/>\r\n\t\t\t\t\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"margin-tb-s\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"text-sm\" :class=\"embedded ? 'text-white-9' : 'text-black-9'\">{{formatHtml(each.content)}}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"comment-main-foot flex flex-direction align-center margin-bottom\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"margin-right-sm\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"text-sm\" :class=\"embedded ? 'text-white-5' : 'text-black-5'\">{{ each.created_text }}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\t\t\tclass=\"margin-right-sm\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\" handleReply( item.user.nickname, each.user.nickname, item.id ) \"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"text-sm text-blue\">回复</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\t\t\tclass=\"margin-right-sm\"\r\n\t\t\t\t\t\t\t\t\t\tv-if=\"each.owner\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"handleDelete(index, keys)\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"text-sm text-red\">删除</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 子评论列表-end -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t<!-- 评论不存在 -->\r\n\t\t<view\r\n\t\t\tclass=\"flex align-center justify-center\"\r\n\t\t\t:style=\"{ height: `${mainHeight}px` }\"\r\n\t\t\tv-else\r\n\t\t>\r\n\t\t\t<view>\r\n\t\t\t\t<image\r\n\t\t\t\t\tclass=\"comment-none-image\"\r\n\t\t\t\t\tsrc=\"@/static/images/default/network_default3x.png\"\r\n\t\t\t\t></image>\r\n\t\t\t\t<view class=\"flex-direction text-center justify-center margin-top-bj\">\r\n\t\t\t\t\t<text class=\"text-gray-dark text-sm\">还没有任何评论，</text>\r\n\t\t\t\t\t<text class=\"text-orange text-sm\" @click=\"commentInput\">抢沙发！</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 底部评论条 -->\r\n\t\t<view class=\"flex flex-direction justify-between align-center\" :style=\"{ height: `${tabbarHeight}px`, paddingBottom: `${tabbarTop}px`}\">\r\n\t\t\t<input\r\n\t\t\t\tclass=\"comment-input flex-sub padding-lr-sm\"\r\n\t\t\t\tv-model=\"commentReq.content\"\r\n\t\t\t\tplaceholder=\"有爱评论, 讲点好听的把~\"\r\n\t\t\t\tplaceholder-style=\"fontSize: 14px; color: #999999;\"\r\n\t\t\t\t:maxlength=\"100\"\r\n\t\t\t\t:focus=\"focus\"\r\n\t\t\t\t@blur=\"handleBlur\"\r\n\t\t\t/>\r\n\t\t\t<view class=\"flex comment-button margin-left-bj justify-center align-center text-white\" @click=\"handleAdd\">\r\n\t\t\t\t<!-- #ifndef APP-PLUS -->\r\n\t\t\t\t<text class=\"wlIcon-shangchuan\"></text>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t<!-- #ifdef APP-PLUS -->\r\n\t\t\t\t<text v-if=\"embedded\" class=\"icon text-sm\">&#xe640;</text>\r\n\t\t\t\t<text v-else class=\"wlIcon-shangchuan\"/>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'wanlComment',\r\n\tprops: {\r\n\t\tfindId: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0\r\n\t\t},\r\n\t\tembedded: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tcommenCount: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0\r\n\t\t},\r\n\t\tcommentList: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeleteTip: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '删除后不可找回，子评论将一并删除'\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmainHeight: 0,\r\n\t\t\ttabbarTop: 0,\r\n\t\t\ttabbarHeight: 0,\r\n\t\t\tcommentReq: {\r\n\t\t\t\tpid: null, // 评论父id\r\n\t\t\t\tcontent: null // 评论内容\r\n\t\t\t},\r\n\t\t\tpUser: null, // 标签-回复人\r\n\t\t\tfocus: false // 输入框自动聚焦\r\n\t\t};\r\n\t},\r\n\tasync mounted() {\r\n\t\tlet sys = uni.getSystemInfoSync();\r\n\t\tthis.mainHeight =  sys.windowHeight / 1.8;\r\n\t\tthis.tabbarTop = this.embedded ? 0 : sys.safeAreaInsets.bottom;\r\n\t\tthis.tabbarHeight = (this.embedded ? 0 : sys.safeAreaInsets.bottom) + uni.upx2px(70);\r\n\t},\r\n\tmethods: {\r\n\t\t// 回复评论\r\n\t\thandleReply(pUser, reUser, pId) {\r\n\t\t\tthis.pUser = pUser;\r\n\t\t\tthis.commentReq.pid = pId;\r\n\t\t\tif (reUser) {\r\n\t\t\t\tthis.commentReq.content = '@' + reUser + ' ';\r\n\t\t\t} else {\r\n\t\t\t\tthis.commentReq.content = '';\r\n\t\t\t}\r\n\t\t\tthis.commentInput();\r\n\t\t},\r\n\t\t// 点赞评论\r\n\t\tasync handleLike(index, keys = null) {\r\n\t\t\tif (this.$store.state.user.isLogin) {\r\n\t\t\t\tlet comment = keys === null ? this.commentList[index] : this.commentList[index].childlist[keys];\r\n\t\t\t\t// 加载网络\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `${this.$store.state.common.appUrl.api}/flbooth/find/comments/likeData`,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tid: comment.id\r\n\t\t\t\t\t},\r\n\t\t\t\t\theader: { \r\n\t\t\t\t\t\t'Accept-Language':'zh-CN,zh;q=0.9',\r\n\t\t\t\t\t\ttoken: this.$store.state.user.token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif(res.data.code === 1){\r\n\t\t\t\t\t\t\tcomment.hasLike = res.data.data.data;\r\n\t\t\t\t\t\t\tif(res.data.data.data){\r\n\t\t\t\t\t\t\t\tcomment.like += 1;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tcomment.like -= 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t    title: res.data.msg,\r\n\t\t\t\t\t\t\t    icon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/user/auth/auth'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 新增评论\r\n\t\tasync handleAdd() {\r\n\t\t\tif (this.$store.state.user.isLogin) {\r\n\t\t\t\tif (this.commentReq.content == null || this.commentReq.content.length < 2) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '评论内容过短',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.commentReq.find_id = this.findId;\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `${this.$store.state.common.appUrl.api}/flbooth/find/comments/addData`,\r\n\t\t\t\t\tdata: this.commentReq,\r\n\t\t\t\t\theader: { \r\n\t\t\t\t\t\t'Accept-Language':'zh-CN,zh;q=0.9',\r\n\t\t\t\t\t\ttoken: this.$store.state.user.token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif(res.data.code === 1){\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t    title: '评论成功',\r\n\t\t\t\t\t\t\t    icon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.tagClose();\r\n\t\t\t\t\t\t\tthis.$emit('complete', {type: 'add', count: this.commenCount + 1});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t    title: res.data.msg,\r\n\t\t\t\t\t\t\t    icon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/user/auth/auth'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 删除评论前确认\r\n\t\tasync handleDelete(index, keys = null) {\r\n\t\t\tif (this.$store.state.user.isLogin) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: this.deleteTip,\r\n\t\t\t\t\tconfirmText: '确认删除',\r\n\t\t\t\t\tsuccess: (res)=> {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tlet comment = keys === null ? this.commentList[index] : this.commentList[index].childlist[keys];\r\n\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\turl: `${this.$store.state.common.appUrl.api}/flbooth/find/comments/delData`,\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\tid: comment.id,\r\n\t\t\t\t\t\t\t\t\tfind_id: comment.find_id\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\theader: { \r\n\t\t\t\t\t\t\t\t\t'Accept-Language':'zh-CN,zh;q=0.9',\r\n\t\t\t\t\t\t\t\t\ttoken: this.$store.state.user.token\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\tif(res.data.code === 1){\r\n\t\t\t\t\t\t\t\t\t\tlet commentList = this.commentList;\r\n\t\t\t\t\t\t\t\t\t\tlet childlist = this.commentList[index].childlist;\r\n\t\t\t\t\t\t\t\t\t\tif(keys === null){\r\n\t\t\t\t\t\t\t\t\t\t\tcommentList.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tchildlist.splice(keys, 1);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tthis.$emit('complete', {type: 'del', count: res.data.data.count});\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t    title: res.data.msg,\r\n\t\t\t\t\t\t\t\t\t\t    icon: 'none'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/user/auth/auth'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 标签关闭\r\n\t\ttagClose() {\r\n\t\t\tthis.pUser = null;\r\n\t\t\tthis.commentReq.pid = null;\r\n\t\t\tthis.commentReq.content = null;\r\n\t\t},\r\n\t\t// 输入框失去焦点\r\n\t\thandleBlur() {\r\n\t\t\tthis.focus = false;\r\n\t\t},\r\n\t\t// 输入评论\r\n\t\tcommentInput() {\r\n\t\t\tthis.focus = true;\r\n\t\t\t// TODO 调起键盘方法\r\n\t\t},\r\n\t\t// 格式化html\r\n\t\tformatHtml(content) {\r\n\t\t\treturn content.replace(/<\\/?.+?>/g, '').replace(/ /g, '');\r\n\t\t},\r\n\t\toss(url, w = 120, h = 120, modenum = 2, type = '', format = 'jpg', resize = 'resize', multiple = 3){\r\n\t\t\tlet ossStc = this.$store.state.common.appUrl.oss;\r\n\t\t\tlet image = '';\r\n\t\t\tlet mode = [\"m_lfit\",\"m_mfit\",\"m_fill\",\"m_fixed\"];\r\n\t\t\t// 图像，自适应方向：1，渐进显示：1，转换格式：jpg，图片质量：q_90，图片锐化：50，浓缩图\r\n\t\t\tlet rule = [\"?x-oss-process=image\", \"auto-orient,1\", \"interlace,1\", \"format,jpg\", \"quality,q_90\", \"sharpen,50\", \"resize,m_fixed,w_120,h_120\"];\r\n\t\t\t// 转换格式\r\n\t\t\tif (format == 'png') {\r\n\t\t\t\trule[3] = [\"format\", \"png\"].join(\",\");\r\n\t\t\t}\r\n\t\t\t// 判断是否有高度\r\n\t\t\tif (w == 0) {\r\n\t\t\t\trule[6] = [resize, mode[modenum], `h_${h * multiple}`].join(\",\");\r\n\t\t\t}else if(h == 0){\r\n\t\t\t\trule[6] = [resize, mode[modenum], `w_${w * multiple}`].join(\",\");\r\n\t\t\t}else{\r\n\t\t\t\trule[6] = [resize, mode[modenum], `w_${w * multiple}`, `h_${h * multiple}`].join(\",\");\r\n\t\t\t}\r\n\t\t\t//当地址不存在\r\n\t\t\tif (url) {\r\n\t\t\t\tif ((/^data:image\\//.test(url))) {\r\n\t\t\t\t\timage = url;\r\n\t\t\t\t}else if((/^(http|https):\\/\\/.+/.test(url))){\r\n\t\t\t\t\trule.pop();\r\n\t\t\t\t\timage = url + rule.join(\"/\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\timage = ossStc + url + rule.join(\"/\");\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif (type == 'transparent') {\r\n\t\t\t\t\t\r\n\t\t\t\t}else if(type == 'avatar'){\r\n\t\t\t\t\timage = ossStc + '/common/mine_def_touxiang_3x.png';\r\n\t\t\t\t}else{\r\n\t\t\t\t\timage = ossStc + '/common/img_default3x.png';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn image;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style>\r\n@import '@/static/style/wanlnvue.css';\r\n.comment-avatar{\r\n    width: 70rpx;\r\n    height: 70rpx;\r\n\tbackground-color: rgba(100,100,100,0.2);\r\n}\r\n.comment-tag{\r\n\tpadding: 0 10rpx;\r\n\tborder-radius: 10rpx;\r\n\theight: 32rpx;\r\n\toverflow: hidden;\r\n}\r\n\r\n.comment-none-image {\r\n\theight: 360rpx;\r\n\twidth: 360rpx;\r\n}\r\n.comment-input{\r\n\tbackground-color: #ececec;\r\n\theight: 70rpx;\r\n\tborder-radius: 5000rpx;\r\n\tfont-size: 14px;\r\n\tcolor: #333333;\r\n}\r\n.comment-button{\r\n\tbackground-color: #02DC6B;\r\n\tborder-radius: 5000rpx;\r\n\theight: 70rpx;\r\n\twidth: 70rpx;\r\n}\r\n.comment-chil-dlist{\r\n\tbackground-color: rgba(100,100,100,0.05);\r\n}\r\n.comment-fabulous{\r\n\theight: 40rpx;\r\n}\r\n</style>","import mod from \"-!../../../../../hbuild/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuild/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuild/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wanl-comment.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../hbuild/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuild/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuild/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wanl-comment.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1657100110941\n      var cssReload = require(\"D:/soft/hbuild/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
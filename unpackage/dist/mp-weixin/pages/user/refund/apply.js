(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/refund/apply"],{"0ece":function(e,t,o){"use strict";var n=o("41d8"),r=o.n(n);r.a},"1ee1":function(e,t,o){"use strict";o.r(t);var n=o("35e8"),r=o("5b37");for(var a in r)"default"!==a&&function(e){o.d(t,e,(function(){return r[e]}))}(a);o("0ece");var s,u=o("f0c5"),i=Object(u["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=i.exports},"35e8":function(e,t,o){"use strict";var n;o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return n}));var r=function(){var e=this,t=e.$createElement,o=(e._self._c,e.$flbooth.oss(e.goods.image,70,70)),n=e.__map(e.refund.images,(function(t,o){var n=e.__get_orig(t),r=e.$flbooth.oss(t,90,90);return{$orig:n,g1:r}}));e.$mp.data=Object.assign({},{$root:{g0:o,l0:n}})},a=[]},"41d8":function(e,t,o){},"4bf6":function(e,t,o){"use strict";(function(e){o("e954");n(o("66fd"));var t=n(o("1ee1"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=o,e(t.default)}).call(this,o("543d")["createPage"])},"5b37":function(e,t,o){"use strict";o.r(t);var n=o("dd22"),r=o.n(n);for(var a in n)"default"!==a&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t["default"]=r.a},dd22:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,o,n,r,a,s){try{var u=e[a](s),i=u.value}catch(c){return void o(c)}u.done?t(i):Promise.resolve(i).then(n,r)}function s(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var s=e.apply(t,o);function u(e){a(s,n,r,u,i,"next",e)}function i(e){a(s,n,r,u,i,"throw",e)}u(void 0)}))}}var u={data:function(){return{freight_type:0,goods:{},expressList:["未收到货","已收到货"],typeList:["我要退款(无需退货)","退货退款"],reasonList:["不喜欢","空包裹","一直未送达","颜色/尺码不符","质量问题","少件漏发","假冒品牌"],refund:{order_id:0,order_type:"goods",expressType:-1,type:-1,reason:-1,goods:0,money:0,images:[],refund_content:""},amount:{total:0,placeholder:"",info:""}}},onLoad:function(e){var t=JSON.parse(e.data);if(this.goods=t.goods,this.refund.order_id=t.order_id,this.refund.order_type=t.order_type,this.refund.goods=t.goods.id,this.freight_type=t.freight_type,this.goods_number=t.goods_number,1==this.goods_number||2==this.freight_type){var o=this.$flbooth.bcadd(t.goods.actual_payment,t.goods.freight_price),n="最多￥".concat(o);parseInt(t.discount_price)>0&&(n+="，其中总额￥".concat(this.$flbooth.bcmul(t.goods.price,t.goods.number),"，优惠￥").concat(t.goods.discount_price)),parseInt(t.goods.freight_price)>0&&(n+="，包含运费￥".concat(t.goods.freight_price)),this.amount.info=n,this.amount.placeholder="退款金额不能超过 ￥".concat(o," 元"),this.amount.total=Number(o)}else{var r=t.goods.actual_payment,a="注意：最多￥".concat(r);parseInt(t.goods.discount_price)>0&&(a+="，其中总额￥".concat(this.$flbooth.bcmul(t.goods.price,t.goods.number),"，优惠￥").concat(t.goods.discount_price)),parseInt(t.goods.freight_price)>0&&(a+="，策略不包含运费￥".concat(t.goods.freight_price)),this.amount.info=a,this.amount.placeholder="退款金额不能超过 ￥".concat(r," 元"),this.amount.total=Number(r)}},methods:{addData:function(){var t=this;return s(n.default.mark((function o(){return n.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!(t.refund.money>t.amount.total)){o.next=3;break}return t.$flbooth.msg(t.amount.info),o.abrupt("return",!1);case 3:if(-1!=t.refund.expressType){o.next=6;break}return t.$flbooth.msg("请选择物流状态"),o.abrupt("return",!1);case 6:if(-1!=t.refund.type){o.next=9;break}return t.$flbooth.msg("请选择退款类型"),o.abrupt("return",!1);case 9:if(-1!=t.refund.reason){o.next=12;break}return t.$flbooth.msg("请选择退款原因"),o.abrupt("return",!1);case 12:t.refund.money<=0&&e.showModal({title:"重要提示",content:"你的退款金额可能是零元，可能失去售后机会是否确认",success:function(e){if(e.cancel)return!1}}),t.$api.post({url:"/flbooth/refund/addApply",data:t.refund,success:function(e){t.$store.commit("statistics/order",{customer:t.$store.state.statistics.order.customer+1}),t.$flbooth.to("/pages/user/refund/details?id=".concat(e))}});case 14:case"end":return o.stop()}}),o)})))()},chooseImage:function(t){var o=this;e.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album"],success:function(t){o.$api.get({url:"/flbooth/common/uploadData",success:function(n){for(var r=0;r<t.tempFilePaths.length;r++)e.getImageInfo({src:t.tempFilePaths[r],success:function(e){o.$api.upload({url:n.uploadurl,filePath:e.path,name:"file",formData:"local"==n.storage?null:n.multipart,success:function(e){o.refund.images.push(e.fullurl)}})}})}})}})},expressChange:function(e){this.refund.expressType=e.detail.value},typeChange:function(e){this.refund.type=e.detail.value},reasonChange:function(e){this.refund.reason=e.detail.value},moneyInput:function(e){var t=e.detail.value;t>this.amount.total&&this.$flbooth.msg(this.amount.info),this.refund.money=e.detail.value},viewImage:function(t){e.previewImage({urls:this.refund.images,current:this.refund.images[t]})},delImg:function(e){this.refund.images.splice(e,1)}}};t.default=u}).call(this,o("543d")["default"])}},[["4bf6","common/runtime","common/vendor"]]]);
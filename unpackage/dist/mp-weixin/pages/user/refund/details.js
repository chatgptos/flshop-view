(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/refund/details"],{"24c4":function(t,e,a){"use strict";(function(t){a("e954");n(a("66fd"));var e=n(a("f678"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=a,t(e.default)}).call(this,a("543d")["createPage"])},"378e":function(t,e,a){"use strict";a.r(e);var n=a("b83b"),r=a.n(n);for(var u in n)"default"!==u&&function(t){a.d(e,t,(function(){return n[t]}))}(u);e["default"]=r.a},6281:function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return u})),a.d(e,"a",(function(){return n}));var r=function(){var t=this,e=t.$createElement,a=(t._self._c,t.$flbooth.appstc("/order/img_detail_bg.png")),n=t.getStateText(t.refundData.state),r=4!=t.refundData.state?t.getStateInfo(t.refundData.state):null,u=t.$flbooth.oss(t.refundData.goods.image,70,70);t.$mp.data=Object.assign({},{$root:{g0:a,m0:n,m1:r,g1:u}})},u=[]},8455:function(t,e,a){"use strict";var n=a("ea6c"),r=a.n(n);r.a},b83b:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(a("a34a"));function r(t){return t&&t.__esModule?t:{default:t}}function u(t,e,a,n,r,u,o){try{var i=t[u](o),s=i.value}catch(f){return void a(f)}i.done?e(s):Promise.resolve(s).then(n,r)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var o=t.apply(e,a);function i(t){u(o,n,r,i,s,"next",t)}function s(t){u(o,n,r,i,s,"throw",t)}i(void 0)}))}}var i={data:function(){return{refundData:{statetime:"",goods:{}},returnData:{id:0,express_no:"",express_name:""},kuaidiKey:-1}},onLoad:function(t){this.loadData({id:t.id})},methods:{loadData:function(t){var e=this;return o(n.default.mark((function a(){return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$api.get({url:"/flbooth/refund/getRefundInfo",data:t,success:function(t){if(e.refundData=t,e.returnData.id=t.id,0==t.state){var a=t.created+86400*t.config.autoagree-Date.parse(new Date)/1e3,n=Math.floor(a/86400),r=Math.floor(a%86400/3600),u=Math.floor(a%86400%3600/60);u>0&&(e.refundData.statetime="还剩"+u+"分"),r>0&&(e.refundData.statetime="还剩"+r+"天"+u+"分"),n>0&&(e.refundData.statetime="还剩"+n+"天"+r+"小时"+u+"分")}else if(1==t.state){a=t.agreetime+86400*t.config.returntime-Date.parse(new Date)/1e3,n=Math.floor(a/86400),r=Math.floor(a%86400/3600),u=Math.floor(a%86400%3600/60);u>0&&(e.refundData.statetime="还剩"+u+"分"),r>0&&(e.refundData.statetime="还剩"+r+"天"+u+"分"),n>0&&(e.refundData.statetime="还剩"+n+"天"+r+"小时"+u+"分")}else if(2==t.state)e.refundData.statetime=t.rejecttime_text;else if(6==t.state){a=t.returntime+86400*t.config.receivingtime-Date.parse(new Date)/1e3,n=Math.floor(a/86400),r=Math.floor(a%86400/3600),u=Math.floor(a%86400%3600/60);u>0&&(e.refundData.statetime="还剩"+u+"分"),r>0&&(e.refundData.statetime="还剩"+r+"天"+u+"分"),n>0&&(e.refundData.statetime="还剩"+n+"天"+r+"小时"+u+"分")}else 3==t.state?e.refundData.statetime="等待平台处理":4==t.state?e.refundData.statetime=t.completetime_text:5==t.state&&(e.refundData.statetime=t.closingtime_text)}});case 1:case"end":return a.stop()}}),a)})))()},getStateText:function(t){return["等待卖家同意","等待买家退货","卖家拒绝退款","平台介入","退款完成","退款关闭","等待卖家收取退货"][t]},getStateInfo:function(t){return["您已成功发起退款，等待卖家同意","您发起的退款卖家已同意，请退货","您可以修改退货申请再次发起","您已申请平台介入，请等待平台对此判定","退款完成","您已关闭本次退款申请","如果商家确认收到货物，并核查没有问题，将退款给您"][t]},kuaidiChange:function(t){this.kuaidiKey=t.detail.value,this.returnData.express_name=this.refundData.kuaidi[t.detail.value].code},refundLog:function(t){this.$flbooth.to("/pages/user/refund/log?id=".concat(t))},arbitrationRefund:function(t){var e=this;return o(n.default.mark((function a(){return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$api.get({url:"/flbooth/refund/arbitrationRefund",data:{id:t},success:function(a){e.loadData({id:t})}});case 1:case"end":return a.stop()}}),a)})))()},closeRefund:function(t){var e=this;return o(n.default.mark((function a(){return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$api.get({url:"/flbooth/refund/closeRefund",data:{id:t},success:function(a){e.$store.commit("statistics/order",{customer:e.$store.state.statistics.order.customer-1}),e.loadData({id:t})}});case 1:case"end":return a.stop()}}),a)})))()},toExpress:function(){var t=this;return o(n.default.mark((function e(){return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.returnData.express_no){e.next=3;break}return t.$flbooth.msg("运单号不能为空"),e.abrupt("return",!1);case 3:if(t.returnData.express_name){e.next=6;break}return t.$flbooth.msg("请选择快递公司"),e.abrupt("return",!1);case 6:t.$api.post({url:"/flbooth/refund/toExpress",data:t.returnData,success:function(e){t.loadData({id:e})}});case 7:case"end":return e.stop()}}),e)})))()},editRefund:function(t){this.$flbooth.to("/pages/user/refund/edit?id=".concat(t))}}};e.default=i},ea6c:function(t,e,a){},f678:function(t,e,a){"use strict";a.r(e);var n=a("6281"),r=a("378e");for(var u in r)"default"!==u&&function(t){a.d(e,t,(function(){return r[t]}))}(u);a("8455");var o,i=a("f0c5"),s=Object(i["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);e["default"]=s.exports}},[["24c4","common/runtime","common/vendor"]]]);
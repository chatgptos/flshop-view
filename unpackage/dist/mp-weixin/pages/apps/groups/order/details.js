(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/apps/groups/order/details"],{"4e34":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(r("a34a"));function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e,r,a,o,n,i){try{var s=t[n](i),d=s.value}catch(u){return void r(u)}s.done?e(d):Promise.resolve(d).then(a,o)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var i=t.apply(e,r);function s(t){n(i,a,o,s,d,"next",t)}function d(t){n(i,a,o,s,d,"throw",t)}s(void 0)}))}}var s={data:function(){return{orderData:{order_no:"",address:{name:"加载中...",mobile:"",address:"",address_name:""},logistics:{context:"",status:"",time:""},statetime:""},logisticsType:!1,infoMore:!1}},onLoad:function(t){this.loadData({id:t.id})},methods:{loadData:function(t){var e=this;return i(a.default.mark((function r(){return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$api.get({url:"/flbooth/groups/order/getOrderInfo",data:t,success:function(t){if(e.orderData=t,e.logisticsType=!0,0==t.state)e.orderData.statetime="剩余时间0";else if(1==t.state){var r=t.created+86400*t.config.cancel-Date.parse(new Date)/1e3,a=Math.floor(r/86400),o=Math.floor(r%86400/3600),n=Math.floor(r%86400%3600/60);n>0&&(e.orderData.statetime="还剩"+n+"分自动关闭订单"),o>0&&(e.orderData.statetime="还剩"+o+"天"+n+"分自动关闭订单"),a>0&&(e.orderData.statetime="还剩"+a+"天"+o+"小时"+n+"分自动关闭订单")}else if(2==t.state)e.orderData.statetime="等待分享成团";else if(3==t.state)e.orderData.statetime="等待卖家发货";else if(4==t.state){r=t.delivertime+86400*t.config.receiving-Date.parse(new Date)/1e3,a=Math.floor(r/86400),o=Math.floor(r%86400/3600),n=Math.floor(r%86400%3600/60);n>0&&(e.orderData.statetime="还剩"+n+"分自动确认收货"),o>0&&(e.orderData.statetime="还剩"+o+"天"+n+"分自动确认收货"),a>0&&(e.orderData.statetime="还剩"+a+"天"+o+"小时"+n+"分自动确认收货")}else if(5==t.state){r=t.taketime+86400*t.config.comment-Date.parse(new Date)/1e3,a=Math.floor(r/86400),o=Math.floor(r%86400/3600),n=Math.floor(r%86400%3600/60);n>0&&(e.orderData.statetime="还剩"+n+"分自动评论"),o>0&&(e.orderData.statetime="还剩"+o+"天"+n+"分自动评论"),a>0&&(e.orderData.statetime="还剩"+a+"天"+o+"小时"+n+"分自动评论")}else 6==t.state?e.orderData.statetime=t.dealtime_text:7==t.state&&(e.orderData.statetime="订单已取消")}});case 1:case"end":return r.stop()}}),r)})))()},getImg:function(t){return["img_order_payment3x.png","img_order_send3x.png","img_order_received3x.png","img_order_signed3x.png","img_order_closed3x.png","img_order_signed3x.png","img_order_closed3x.png"][t-1]},getStatusText:function(t){return["等待您付款","拼团中","待发货","待收货","待评论","订单已完成","交易关闭"][t-1]},getRefund:function(t){return["退款","退款中","待退货","退款完成","退款关闭","退款被拒"][t]},onGroups:function(t){this.$flbooth.to("/pages/apps/groups/team?id=".concat(t))},toGoods:function(t){this.$flbooth.to("/pages/apps/groups/goods?id=".concat(t))},onRefund:function(t,e,r,a){0==e?this.$flbooth.to("/pages/user/refund/apply?data=".concat(JSON.stringify({order_id:this.orderData.id,goods:this.orderData.goods[a],freight_type:this.orderData.freight_type,discount_price:this.orderData.pay.discount_price,goods_number:this.orderData.goods.length,order_type:"groups"}))):this.$flbooth.to("/pages/user/refund/details?id=".concat(r))},toMore:function(){this.infoMore=!this.infoMore}}};e.default=s},9714:function(t,e,r){"use strict";r.r(e);var a=r("bdba"),o=r("9c9c");for(var n in o)"default"!==n&&function(t){r.d(e,t,(function(){return o[t]}))}(n);r("ff06");var i,s=r("f0c5"),d=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);e["default"]=d.exports},"9c9c":function(t,e,r){"use strict";r.r(e);var a=r("4e34"),o=r.n(a);for(var n in a)"default"!==n&&function(t){r.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},bdba:function(t,e,r){"use strict";var a;r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return n})),r.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,r=(t._self._c,t.$flbooth.appstc("/order/img_detail_bg.png")),a=t.getStatusText(t.orderData.state),o=t.$flbooth.appstc("/order/"+t.getImg(t.orderData.state)),n=t.orderData.address.address.replace(/\//g," "),i=[2,3,4,5,6].indexOf(t.orderData.state),s=t.orderData.order_no?t.__map(t.orderData.goods,(function(e,r){var a=t.__get_orig(e),o=t.$flbooth.oss(e.image,77,77),n=-1!==i?t.getRefund(e.refund_status):null;return{$orig:a,g3:o,m1:n}})):null;t.$mp.data=Object.assign({},{$root:{g0:r,m0:a,g1:o,g2:n,g4:i,l0:s}})},n=[]},ceda:function(t,e,r){"use strict";(function(t){r("e954");a(r("66fd"));var e=a(r("9714"));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=r,t(e.default)}).call(this,r("543d")["createPage"])},db04:function(t,e,r){},ff06:function(t,e,r){"use strict";var a=r("db04"),o=r.n(a);o.a}},[["ceda","common/runtime","common/vendor"]]]);
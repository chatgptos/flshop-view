(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/page/search"],{2752:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(s("a34a"));function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e,s,r,o,n,a){try{var i=t[n](a),c=i.value}catch(u){return void s(u)}i.done?e(c):Promise.resolve(c).then(r,o)}function a(t){return function(){var e=this,s=arguments;return new Promise((function(r,o){var a=t.apply(e,s);function i(t){n(a,r,o,i,c,"next",t)}function c(t){n(a,r,o,i,c,"throw",t)}i(void 0)}))}}var i={data:function(){return{searchType:"goods",searchTypeText:{goods:"商品、类目",groups:"团购商品、团购类目",find:"种草、买家秀"},searchKeywords:"",isHistory:!0,searchList:{},historyList:[],search:{categoryList:{},searchList:{}}}},onReady:function(){this.loadData(),this.historyList=t.getStorageSync("search:history")},onLoad:function(t){t.keywords&&(this.searchKeywords=t.keywords),t.type&&(this.searchType=t.type)},methods:{loadData:function(){var t=this;return a(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$api.get({url:"/flbooth/common/searchList",success:function(e){t.searchList=e}});case 1:case"end":return e.stop()}}),e)})))()},loadSearch:function(t){var e=this;return a(r.default.mark((function s(){return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e.$api.get({url:"/flbooth/common/search",data:{search:t},success:function(t){e.search=t,0==t.categoryList.length&&0==t.searchList.length||(e.isHistory=!1)}});case 1:case"end":return s.stop()}}),s)})))()},setSearch:function(t){var e=this;return a(r.default.mark((function s(){return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e.$api.get({url:"/flbooth/common/setSearch",data:{keywords:t}});case 1:case"end":return s.stop()}}),s)})))()},setHistory:function(e){this.setSearch(e),this.loadData();var s=t.getStorageSync("search:history");this.historyList=[],this.historyList=s;var r=s;r||(r=[]);var o={};o="string"===typeof e?{keywords:e}:e;for(var n=0;n<r.length;n++)if(r[n].keywords===o.keywords){r.splice(n,1);break}r.unshift(o),t.setStorage({key:"search:history",data:r})},removeHistory:function(){var e=this;t.showModal({title:"提示",content:"是否清理全部搜索历史？该操作不可逆。",success:function(s){s.confirm&&(e.historyList=[],t.removeStorage({key:"search:history"}))}})},keywordsToList:function(t){this.setHistory(t),"find"===this.searchType?this.$flbooth.to("/pages/apps/find/list?search=".concat(t)):this.$flbooth.to("/pages/product/list?type=".concat(this.searchType,"&search=").concat(t))},categoryToList:function(t,e){this.setHistory(e),this.$flbooth.to("/pages/product/list?type=".concat(this.searchType,"&data=").concat(JSON.stringify({category_id:t,category_name:e})))},onSearchInputChanged:function(t){var e=t.detail.value;e?this.loadSearch(e):this.isHistory=!0},onSearchInputConfirmed:function(e){var s=e.detail.value;if(s)this.isHistory=!0,t.hideKeyboard(),this.historyList=[],this.historyList=t.getStorageSync("search:history"),this.keywordsToList(s);else{if(this.isHistory=!0,!this.searchKeywords)return void t.showModal({title:"提示",content:"请输入内容。"});this.keywordsToList(this.searchKeywords)}}}};e.default=i}).call(this,s("543d")["default"])},"2fa0":function(t,e,s){"use strict";s.r(e);var r=s("2752"),o=s.n(r);for(var n in r)"default"!==n&&function(t){s.d(e,t,(function(){return r[t]}))}(n);e["default"]=o.a},5890:function(t,e,s){},6422:function(t,e,s){"use strict";var r=s("5890"),o=s.n(r);o.a},9272:function(t,e,s){"use strict";var r;s.d(e,"b",(function(){return o})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return r}));var o=function(){var t=this,e=t.$createElement,s=(t._self._c,t.$flbooth.wanlsys()),r=t.$flbooth.wanlsys(),o=t.$flbooth.wanlsys();t._isMounted||(t.e0=function(e){return t.$flbooth.back(1)}),t.$mp.data=Object.assign({},{$root:{g0:s,g1:r,g2:o}})},n=[]},c272:function(t,e,s){"use strict";(function(t){s("e954");r(s("66fd"));var e=r(s("d15c"));function r(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=s,t(e.default)}).call(this,s("543d")["createPage"])},d15c:function(t,e,s){"use strict";s.r(e);var r=s("9272"),o=s("2fa0");for(var n in o)"default"!==n&&function(t){s.d(e,t,(function(){return o[t]}))}(n);s("6422");var a,i=s("f0c5"),c=Object(i["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);e["default"]=c.exports}},[["c272","common/runtime","common/vendor"]]]);